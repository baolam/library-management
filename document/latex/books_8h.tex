\doxysection{include/books.h File Tham chiếu}
\hypertarget{books_8h}{}\label{books_8h}\index{include/books.h@{include/books.h}}


Lưu trữ những hàm sẽ được dùng cho quản lí sách.  


{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$time.\+h$>$}\newline
{\ttfamily \#include "{}utils/management.\+h"{}}\newline
{\ttfamily \#include "{}utils/trie.\+h"{}}\newline
{\ttfamily \#include "{}utils/bplustreev2.\+h"{}}\newline
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_book}{Book}}
\begin{DoxyCompactList}\small\item\em Cấu trúc dữ liệu cho một cuốn sách. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Định nghĩa}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{books_8h_a18d607761a55c0a30b69f9d82f1da73e}\label{books_8h_a18d607761a55c0a30b69f9d82f1da73e} 
\#define {\bfseries MAX\+\_\+\+TITLE}~50
\begin{DoxyCompactList}\small\item\em Độ dài tối đa của tiêu đề \end{DoxyCompactList}\item 
\Hypertarget{books_8h_a9986476b23d5ba8a697c60d8130d4e14}\label{books_8h_a9986476b23d5ba8a697c60d8130d4e14} 
\#define {\bfseries MAX\+\_\+\+AUTHOR}~50
\begin{DoxyCompactList}\small\item\em Độ dài tối đa của tác giả \end{DoxyCompactList}\item 
\Hypertarget{books_8h_a0bacc87944c0b8955121b3b9b71664ce}\label{books_8h_a0bacc87944c0b8955121b3b9b71664ce} 
\#define {\bfseries MAX\+\_\+\+GENRE\+\_\+\+NO}~100
\begin{DoxyCompactList}\small\item\em Độ dài tối đa của thể loại sách. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Các hàm}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{books_8h_af3ab34040cfd77b3963472d88ec6c276}\label{books_8h_af3ab34040cfd77b3963472d88ec6c276} 
void {\bfseries show\+\_\+book} (\mbox{\hyperlink{struct_book}{Book}} book)
\begin{DoxyCompactList}\small\item\em Các hàm thao tác với \doxylink{struct_book}{Book}. \end{DoxyCompactList}\item 
\Hypertarget{books_8h_a0c7f88a691fdbbc78ffca5e8095a8bd3}\label{books_8h_a0c7f88a691fdbbc78ffca5e8095a8bd3} 
void {\bfseries add\+\_\+book} (\mbox{\hyperlink{struct_book}{Book}} \texorpdfstring{$\ast$}{*}book)
\item 
void \mbox{\hyperlink{books_8h_a92647df5ddb986901e8113a8ce3f1e3e}{delete\+\_\+book}} (int id)
\begin{DoxyCompactList}\small\item\em Xóa một quyển sách. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{books_8h_a3a2c8d018662acf1c6ca6857a9bb7f86}{update\+\_\+book}} (int id)
\begin{DoxyCompactList}\small\item\em Cập nhật thông tin của một quyển sách. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{books_8h_a53cfe66264bb5e35a77b45a86f1cf8e3}{update\+\_\+book\+\_\+from\+\_\+object}} (\mbox{\hyperlink{struct_book}{Book}} \texorpdfstring{$\ast$}{*}book)
\begin{DoxyCompactList}\small\item\em Cập nhật thông tin một quyển sách, cập nhật vào file nội dung. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{books_8h_ab9223d05c04eaf64efac2e4a8cf2aeec}{search\+\_\+book\+\_\+by\+\_\+id}} (int id)
\begin{DoxyCompactList}\small\item\em Tìm kiếm sách bằng Id. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{books_8h_adbf315a2a4092396b23d8d083661fb6b}{search\+\_\+book\+\_\+by\+\_\+title}} (const char \texorpdfstring{$\ast$}{*}prefix, int max\+Numbers)
\begin{DoxyCompactList}\small\item\em Tìm kiếm sách bằng Title. \end{DoxyCompactList}\item 
\mbox{\hyperlink{struct_book}{Book}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{books_8h_a6fad7a86d2b117aceddf806d3365e422}{search\+\_\+book\+\_\+by\+\_\+title\+\_\+direct}} (const char \texorpdfstring{$\ast$}{*}prefix, int \texorpdfstring{$\ast$}{*}actual\+Books, int max\+Numbers)
\begin{DoxyCompactList}\small\item\em Tìm kiếm sách bằng Title, có hứng kết quả trả về \end{DoxyCompactList}\item 
\mbox{\hyperlink{struct_book}{Book}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{books_8h_ab879ca6938b77771fed16c9a9f9d5ea2}{retrieve\+\_\+bucket\+\_\+books}} (int begining\+Key, int quanities, int \texorpdfstring{$\ast$}{*}actual\+Books)
\begin{DoxyCompactList}\small\item\em Hàm trả về một tập hợp các quyển sách theo sau một Id tìm kiếm. \end{DoxyCompactList}\item 
\Hypertarget{books_8h_ad52d1d47f78b08b5e1b73062842a8c34}\label{books_8h_ad52d1d47f78b08b5e1b73062842a8c34} 
\mbox{\hyperlink{struct_book}{Book}} \texorpdfstring{$\ast$}{*} {\bfseries search\+\_\+book} (int id)
\begin{DoxyCompactList}\small\item\em Phục vụ cho nhóm nhiệm vụ mượn, trả sách. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{books_8h_a9362c66097877f5e29f487a20ea86fd1}{prepare\+\_\+book}} ()
\begin{DoxyCompactList}\small\item\em Lưu trữ vào file, load dữ liệu ra từ file. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{books_8h_ab0d9d44572464bcfc58d438604d0a598}{save\+\_\+book\+\_\+management}} ()
\begin{DoxyCompactList}\small\item\em Lưu trữ dữ liệu. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{books_8h_ade26076641cca3fc5450d909e32762de}{load\+\_\+book\+\_\+management}} ()
\begin{DoxyCompactList}\small\item\em Load dữ liệu. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Các biến}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{books_8h_ae592405ed1cad3dba6f98c41fe7ac5a9}\label{books_8h_ae592405ed1cad3dba6f98c41fe7ac5a9} 
char {\bfseries book\+\_\+management\+\_\+file} \mbox{[}\mbox{\hyperlink{bplustreev2_8h_a9958e549a943ec37c7fbb33685befb02}{MAX\+\_\+\+FILE\+\_\+\+NAME\+\_\+\+LENGTH}}\mbox{]}
\begin{DoxyCompactList}\small\item\em File quản lí sách. \end{DoxyCompactList}\item 
\Hypertarget{books_8h_a390d31c4003925cffa92edece544dbd1}\label{books_8h_a390d31c4003925cffa92edece544dbd1} 
char {\bfseries book\+\_\+trie\+\_\+management} \mbox{[}\mbox{\hyperlink{bplustreev2_8h_a9958e549a943ec37c7fbb33685befb02}{MAX\+\_\+\+FILE\+\_\+\+NAME\+\_\+\+LENGTH}}\mbox{]}
\begin{DoxyCompactList}\small\item\em File quản lí cây Trie, dùng hỗ trợ cho tìm kiếm bằng tên tác giả \end{DoxyCompactList}\item 
\Hypertarget{books_8h_af8765cafbe20084ab4b9dcf76abf2a00}\label{books_8h_af8765cafbe20084ab4b9dcf76abf2a00} 
char {\bfseries book\+\_\+content\+\_\+file} \mbox{[}\mbox{\hyperlink{bplustreev2_8h_a9958e549a943ec37c7fbb33685befb02}{MAX\+\_\+\+FILE\+\_\+\+NAME\+\_\+\+LENGTH}}\mbox{]}
\begin{DoxyCompactList}\small\item\em File chứa nội dung sách, file quản lí chính. \end{DoxyCompactList}\item 
\Hypertarget{books_8h_a76d586c2492e8d36fda3dc16492a6693}\label{books_8h_a76d586c2492e8d36fda3dc16492a6693} 
\mbox{\hyperlink{struct_node}{Node}} \texorpdfstring{$\ast$}{*} {\bfseries book\+\_\+management}
\begin{DoxyCompactList}\small\item\em Cây B+ Tree quản lí sách. \end{DoxyCompactList}\item 
\Hypertarget{books_8h_a95de0e1b8129a7ede38dff4eb5da683b}\label{books_8h_a95de0e1b8129a7ede38dff4eb5da683b} 
\mbox{\hyperlink{struct_trie_node}{Trie\+Node}} \texorpdfstring{$\ast$}{*} {\bfseries book\+\_\+trie}
\begin{DoxyCompactList}\small\item\em Cây trie quản lí author. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Mô tả chi tiết}
Lưu trữ những hàm sẽ được dùng cho quản lí sách. 

\begin{DoxyAuthor}{Tác giả}
Nguyễn Huy Phong, Nguyễn Đức Bảo Lâm 
\end{DoxyAuthor}
\begin{DoxyVersion}{Phiên bản}
1.\+0
\end{DoxyVersion}
Một số hàm dùng để quản lí sách 

\doxysubsection{Thông tin về hàm}
\Hypertarget{books_8h_a92647df5ddb986901e8113a8ce3f1e3e}\index{books.h@{books.h}!delete\_book@{delete\_book}}
\index{delete\_book@{delete\_book}!books.h@{books.h}}
\doxysubsubsection{\texorpdfstring{delete\_book()}{delete\_book()}}
{\footnotesize\ttfamily \label{books_8h_a92647df5ddb986901e8113a8ce3f1e3e} 
void delete\+\_\+book (\begin{DoxyParamCaption}\item[{int}]{id}{}\end{DoxyParamCaption})}



Xóa một quyển sách. 

Việc xoá một quyển sách bao gồm việc xoá bản ghi trong cây B+ Tree, cây Trie đối với Author. Do tính chất dữ liệu lưu trữ trong file nội dung là liên tục nên việc xoá trực tiếp khỏi file nội dung là không nên do sẽ ghi chuyển dịch lưu trữ.

Phương thức xoá được dùng là soft\+\_\+delete. Chỉ là xoá khỏi file quản lí, Dữ liệu vẫn tồn tại trong file nội dung


\begin{DoxyParams}{Các tham số}
{\em id} & Id của quyển sách cần xoá \\
\hline
\end{DoxyParams}
\Hypertarget{books_8h_ade26076641cca3fc5450d909e32762de}\index{books.h@{books.h}!load\_book\_management@{load\_book\_management}}
\index{load\_book\_management@{load\_book\_management}!books.h@{books.h}}
\doxysubsubsection{\texorpdfstring{load\_book\_management()}{load\_book\_management()}}
{\footnotesize\ttfamily \label{books_8h_ade26076641cca3fc5450d909e32762de} 
void load\+\_\+book\+\_\+management (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Load dữ liệu. 

Lấy nội dung dữ liệu đã lưu trữ trước đó \Hypertarget{books_8h_a9362c66097877f5e29f487a20ea86fd1}\index{books.h@{books.h}!prepare\_book@{prepare\_book}}
\index{prepare\_book@{prepare\_book}!books.h@{books.h}}
\doxysubsubsection{\texorpdfstring{prepare\_book()}{prepare\_book()}}
{\footnotesize\ttfamily \label{books_8h_a9362c66097877f5e29f487a20ea86fd1} 
void prepare\+\_\+book (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Lưu trữ vào file, load dữ liệu ra từ file. 

Hàm hỗ trợ cho cây Trie, tìm kiếm = Author

Bản chất chỉ là tạo node quản lí nếu cây chưa tồn tại \Hypertarget{books_8h_ab879ca6938b77771fed16c9a9f9d5ea2}\index{books.h@{books.h}!retrieve\_bucket\_books@{retrieve\_bucket\_books}}
\index{retrieve\_bucket\_books@{retrieve\_bucket\_books}!books.h@{books.h}}
\doxysubsubsection{\texorpdfstring{retrieve\_bucket\_books()}{retrieve\_bucket\_books()}}
{\footnotesize\ttfamily \label{books_8h_ab879ca6938b77771fed16c9a9f9d5ea2} 
\mbox{\hyperlink{struct_book}{Book}} \texorpdfstring{$\ast$}{*} retrieve\+\_\+bucket\+\_\+books (\begin{DoxyParamCaption}\item[{int}]{begining\+Key}{, }\item[{int}]{quanities}{, }\item[{int \texorpdfstring{$\ast$}{*}}]{actual\+Books}{}\end{DoxyParamCaption})}



Hàm trả về một tập hợp các quyển sách theo sau một Id tìm kiếm. 

Dùng hàm này khi cần hứng chính xác một mảng các quyển sách. Được dùng cho nhóm thao tác giao diện \begin{DoxyNote}{Ghi chú}
Dùng xong nhớ free để tránh lãng phí bộ nhớ
\end{DoxyNote}

\begin{DoxyParams}{Các tham số}
{\em begining\+Key} & là vị trí bắt đầu đọc đầu tiên \\
\hline
{\em quanities} & là số lượng sách muốn lấy sau khi kiếm Id đầu tiên \\
\hline
{\em actual\+Books} & là số lượng sách thực tế\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Giá trị trả về}
là mảng chứa các quyển sách tìm được 
\end{DoxyReturn}
\Hypertarget{books_8h_ab0d9d44572464bcfc58d438604d0a598}\index{books.h@{books.h}!save\_book\_management@{save\_book\_management}}
\index{save\_book\_management@{save\_book\_management}!books.h@{books.h}}
\doxysubsubsection{\texorpdfstring{save\_book\_management()}{save\_book\_management()}}
{\footnotesize\ttfamily \label{books_8h_ab0d9d44572464bcfc58d438604d0a598} 
void save\+\_\+book\+\_\+management (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Lưu trữ dữ liệu. 

Nội dung lưu trữ gồm file quản lí B+ Tree, file quản lí cây Trie, file nội dung Lưu trữ trong thư mục data/book \Hypertarget{books_8h_ab9223d05c04eaf64efac2e4a8cf2aeec}\index{books.h@{books.h}!search\_book\_by\_id@{search\_book\_by\_id}}
\index{search\_book\_by\_id@{search\_book\_by\_id}!books.h@{books.h}}
\doxysubsubsection{\texorpdfstring{search\_book\_by\_id()}{search\_book\_by\_id()}}
{\footnotesize\ttfamily \label{books_8h_ab9223d05c04eaf64efac2e4a8cf2aeec} 
void search\+\_\+book\+\_\+by\+\_\+id (\begin{DoxyParamCaption}\item[{int}]{id}{}\end{DoxyParamCaption})}



Tìm kiếm sách bằng Id. 

Kết quả trả về sẽ hiển thị ra màn hình console, (chưa tích hợp hiển thị trên giao diện)


\begin{DoxyParams}{Các tham số}
{\em id} & Id của quyển sách cần tìm \\
\hline
\end{DoxyParams}
\Hypertarget{books_8h_adbf315a2a4092396b23d8d083661fb6b}\index{books.h@{books.h}!search\_book\_by\_title@{search\_book\_by\_title}}
\index{search\_book\_by\_title@{search\_book\_by\_title}!books.h@{books.h}}
\doxysubsubsection{\texorpdfstring{search\_book\_by\_title()}{search\_book\_by\_title()}}
{\footnotesize\ttfamily \label{books_8h_adbf315a2a4092396b23d8d083661fb6b} 
void search\+\_\+book\+\_\+by\+\_\+title (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{prefix}{, }\item[{int}]{max\+Numbers}{}\end{DoxyParamCaption})}



Tìm kiếm sách bằng Title. 

Cung cấp vào tên Author hoặc nhóm chữ cái đầu của tên Author muốn tìm kiếm Kết quả hiển thị là những quyển sách có tên bắt đầu bằng từ tìm kiếm


\begin{DoxyParams}{Các tham số}
{\em prefix} & là nhóm chữ cái đầu của tên Author \\
\hline
{\em max\+Numbers} & là số lượng kết quả tối đa \\
\hline
\end{DoxyParams}
\Hypertarget{books_8h_a6fad7a86d2b117aceddf806d3365e422}\index{books.h@{books.h}!search\_book\_by\_title\_direct@{search\_book\_by\_title\_direct}}
\index{search\_book\_by\_title\_direct@{search\_book\_by\_title\_direct}!books.h@{books.h}}
\doxysubsubsection{\texorpdfstring{search\_book\_by\_title\_direct()}{search\_book\_by\_title\_direct()}}
{\footnotesize\ttfamily \label{books_8h_a6fad7a86d2b117aceddf806d3365e422} 
\mbox{\hyperlink{struct_book}{Book}} \texorpdfstring{$\ast$}{*} search\+\_\+book\+\_\+by\+\_\+title\+\_\+direct (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{prefix}{, }\item[{int \texorpdfstring{$\ast$}{*}}]{actual\+Books}{, }\item[{int}]{max\+Numbers}{}\end{DoxyParamCaption})}



Tìm kiếm sách bằng Title, có hứng kết quả trả về 

Hàm này sẽ trả về kết quả tìm kiếm số lượng sách, hứng kết quả trả về lưu trữ vào mảng. Việc dùng hàm này sẽ giúp đảm bảo lợi thế khi kết nối giao diện. Giao diện có thể gặp khó khăn khi tiến hành gọi callback


\begin{DoxyParams}{Các tham số}
{\em prefix} & là nhóm chữ cái đầu của tên \\
\hline
{\em books} & là số lượng sách đọc được (mảng) \\
\hline
{\em actual\+Books} & là số lượng sách thực tế (mảng) \\
\hline
{\em max\+Numbers} & là số lượng kết quả tối đa\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Giá trị trả về}
là mảng chứa các cuốn sách tìm được 
\end{DoxyReturn}
Cấp phát bộ nhớ cho \doxylink{struct_book}{Book}\Hypertarget{books_8h_a3a2c8d018662acf1c6ca6857a9bb7f86}\index{books.h@{books.h}!update\_book@{update\_book}}
\index{update\_book@{update\_book}!books.h@{books.h}}
\doxysubsubsection{\texorpdfstring{update\_book()}{update\_book()}}
{\footnotesize\ttfamily \label{books_8h_a3a2c8d018662acf1c6ca6857a9bb7f86} 
void update\+\_\+book (\begin{DoxyParamCaption}\item[{int}]{id}{}\end{DoxyParamCaption})}



Cập nhật thông tin của một quyển sách. 

Cập nhật thông tin quyển sách, bản chất là cập nhật file nội dung Do tính chất khoá Id là cố định và bất biến một khi được tạo nên không cần thao tác ở cây B+ tree (thao tác cập nhật, chỉ tận dụng thao tác tìm kiếm)

Phương thức này được dùng và hiển thị ra console. 
\begin{DoxyParams}{Các tham số}
{\em id} & Id của quyển sách cần cập nhật \\
\hline
\end{DoxyParams}
\Hypertarget{books_8h_a53cfe66264bb5e35a77b45a86f1cf8e3}\index{books.h@{books.h}!update\_book\_from\_object@{update\_book\_from\_object}}
\index{update\_book\_from\_object@{update\_book\_from\_object}!books.h@{books.h}}
\doxysubsubsection{\texorpdfstring{update\_book\_from\_object()}{update\_book\_from\_object()}}
{\footnotesize\ttfamily \label{books_8h_a53cfe66264bb5e35a77b45a86f1cf8e3} 
int update\+\_\+book\+\_\+from\+\_\+object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_book}{Book}} \texorpdfstring{$\ast$}{*}}]{book}{}\end{DoxyParamCaption})}



Cập nhật thông tin một quyển sách, cập nhật vào file nội dung. 

Gọi hàm này không cần dùng đến callback 
\begin{DoxyParams}{Các tham số}
{\em book} & cuốn sách muốn cập nhật \\
\hline
\end{DoxyParams}
